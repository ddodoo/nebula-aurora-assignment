apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-config
  namespace: wiki
data:
  dashboards.yaml: |
    apiVersion: 1
    providers:
    - name: 'default'
      orgId: 1
      folder: ''
      type: file
      disableDeletion: false
      options:
        path: /etc/grafana/provisioning/dashboards

  creation-dashboard.json: |
    {
      "uid": "creation-dashboard-678",
      "title": "Creation Dashboard",
      "schemaVersion": 36,
      "version": 1,
      "refresh": "5s",
      "panels": [
        {
          "type": "timeseries",
          "title": "Users and Posts creation rate (5m)",
          "gridPos": { "x": 0, "y": 0, "w": 24, "h": 9 },
          "targets": [
            {
              "expr": "rate(users_created_total[5m])",
              "legendFormat": "users (5m rate)"
            },
            {
              "expr": "rate(posts_created_total[5m])",
              "legendFormat": "posts (5m rate)"
            }
          ]
        }
      ]
    }


